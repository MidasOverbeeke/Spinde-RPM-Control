Version 4.1
SHEET 1 3248 1012
WIRE 48 -192 -128 -192
WIRE 128 -192 48 -192
WIRE 208 -192 128 -192
WIRE 288 -192 208 -192
WIRE -432 -144 -656 -144
WIRE 208 -80 208 -112
WIRE -656 -48 -656 -144
WIRE -128 -16 -128 -192
WIRE 48 -16 48 -192
WIRE 288 -16 288 -192
WIRE -432 0 -432 -144
WIRE 2016 32 1792 32
WIRE -656 96 -656 32
WIRE -432 128 -432 80
WIRE -384 128 -432 128
WIRE -128 128 -128 64
WIRE -128 128 -192 128
WIRE 128 128 128 -192
WIRE 48 144 48 64
WIRE 96 144 48 144
WIRE 288 160 288 64
WIRE 288 160 160 160
WIRE 320 160 288 160
WIRE 1024 160 320 160
WIRE 1472 160 1088 160
WIRE 1744 160 1696 160
WIRE -128 176 -128 128
WIRE -32 176 -128 176
WIRE 96 176 -32 176
WIRE 1744 176 1744 160
WIRE -384 224 -432 224
WIRE -144 224 -192 224
WIRE 1472 224 1104 224
WIRE 1728 224 1696 224
WIRE 48 240 48 144
WIRE 1104 240 1104 224
WIRE -432 256 -432 224
WIRE -144 272 -144 224
WIRE -32 288 -32 176
WIRE 176 288 -32 288
WIRE 320 288 320 160
WIRE 320 288 256 288
WIRE 1280 288 1200 288
WIRE 1472 288 1280 288
WIRE 1792 288 1792 32
WIRE 1792 288 1696 288
WIRE 1200 320 1200 288
WIRE 1280 320 1280 288
WIRE 48 352 48 320
WIRE 128 352 128 192
WIRE 128 352 48 352
WIRE 1440 352 1376 352
WIRE 1472 352 1440 352
WIRE 1792 352 1792 288
WIRE 1792 352 1696 352
WIRE 1376 368 1376 352
WIRE 48 384 48 352
WIRE 1440 400 1440 352
WIRE 1728 400 1728 224
WIRE 1728 400 1440 400
WIRE 2928 400 2800 400
WIRE 3056 400 2928 400
WIRE 1104 464 1104 304
WIRE 1200 464 1200 384
WIRE 1200 464 1104 464
WIRE 1248 464 1200 464
WIRE 1280 464 1280 400
WIRE 1280 464 1248 464
WIRE 1376 464 1376 448
WIRE 1376 464 1280 464
WIRE 1248 496 1248 464
WIRE 2800 544 2800 400
WIRE 2912 544 2800 544
WIRE 3056 544 3056 400
WIRE 3168 544 3056 544
WIRE 2912 560 2912 544
WIRE 3168 560 3168 544
WIRE 2720 624 2480 624
WIRE 2752 624 2720 624
WIRE 3008 624 2944 624
WIRE 2096 640 2080 640
WIRE 2224 640 2160 640
WIRE 2480 640 2480 624
WIRE 2480 640 2288 640
WIRE 2912 640 2912 624
WIRE 2912 640 2800 640
WIRE 3168 640 3168 624
WIRE 3168 640 3056 640
WIRE -96 656 -256 656
WIRE 96 656 -16 656
WIRE 1104 656 96 656
WIRE 2944 656 2944 624
WIRE 2944 656 2672 656
WIRE 2224 672 2160 672
WIRE 1792 688 1792 352
WIRE 1792 688 1632 688
WIRE 2800 704 2800 640
WIRE 2880 704 2800 704
WIRE 3056 704 3056 640
WIRE 3056 704 2960 704
WIRE 96 720 96 656
WIRE -256 736 -256 656
WIRE 1632 736 1632 688
WIRE 2720 736 2720 624
WIRE 2976 736 2720 736
WIRE 1440 752 1440 400
WIRE 1600 752 1440 752
WIRE 2800 752 2800 704
WIRE 2912 752 2800 752
WIRE 3056 752 3056 704
WIRE 3184 752 3056 752
WIRE 2160 768 2160 672
WIRE 2160 768 1664 768
WIRE 2224 768 2160 768
WIRE 2480 768 2288 768
WIRE 3184 768 3184 752
WIRE 1104 784 1104 656
WIRE 1600 784 1104 784
WIRE 2912 784 2912 752
WIRE 2080 800 2080 640
WIRE 2160 800 2080 800
WIRE 2224 800 2160 800
WIRE 2480 832 2480 768
WIRE 2672 832 2672 656
WIRE 2672 832 2480 832
WIRE 2752 832 2672 832
WIRE 2976 832 2976 736
WIRE 3008 832 2976 832
WIRE 96 848 96 784
WIRE 2912 848 2800 848
WIRE 3184 848 3184 832
WIRE 3184 848 3056 848
WIRE -256 864 -256 816
WIRE 2800 896 2800 848
WIRE 2928 896 2800 896
WIRE 3056 896 3056 848
WIRE 3056 896 2928 896
WIRE 2160 912 2160 800
WIRE 2928 928 2928 896
FLAG -432 256 0
FLAG 48 384 0
FLAG -144 272 0
FLAG 208 -80 0
FLAG -656 96 0
FLAG -256 864 0
FLAG 96 848 0
FLAG 1248 496 0
FLAG 2016 112 0
FLAG 1744 176 0
FLAG 1632 800 0
FLAG 2928 928 0
FLAG 2928 480 0
FLAG 2160 992 0
SYMBOL res -448 -16 R0
SYMATTR InstName R1
SYMATTR Value 330
SYMBOL res -144 -32 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res 32 -32 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL voltage 208 -208 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL res 32 224 R0
SYMATTR InstName R4
SYMATTR Value 5k
SYMBOL res 272 -32 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL voltage -656 -64 R0
WINDOW 3 24 152 Left 2
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value SINE(0 2 20k)
SYMATTR InstName V2
SYMBOL voltage -256 720 R0
WINDOW 3 -353 108 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 3.3 0 0.0002 0.0002 0.001 0.02)
SYMATTR InstName V3
SYMBOL cap 80 720 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL res 0 640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 100k
SYMBOL Comparators\\LT1721 128 96 R0
SYMATTR InstName U2
SYMBOL Optos\\PC817A -288 176 R0
SYMATTR InstName U1
SYMBOL res 272 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL LM2917-8 1584 256 R0
SYMATTR InstName U3
SYMBOL cap 1088 240 R0
SYMATTR InstName C2
SYMATTR Value 1n
SYMBOL res 1360 352 R0
SYMATTR InstName R8
SYMATTR Value 100k
SYMBOL res 1264 304 R0
SYMATTR InstName R9
SYMATTR Value 50k
SYMBOL cap 1184 320 R0
SYMATTR InstName C3
SYMATTR Value 220n
SYMBOL voltage 2016 16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 5
SYMBOL cap 1088 144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 47p
SYMBOL Comparators\\LT1721 1632 704 R0
SYMATTR InstName U4
SYMBOL nmos 2752 752 R0
SYMATTR InstName M1
SYMBOL nmos 3008 752 R0
SYMATTR InstName M2
SYMBOL pmos 2752 544 R0
SYMATTR InstName M3
SYMBOL pmos 3008 544 R0
SYMATTR InstName M4
SYMBOL ind 2864 720 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 250µ
SYMATTR SpiceLine Rser=0.12
SYMBOL voltage 2928 384 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 24
SYMBOL voltage 2160 896 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 3.3
SYMBOL Digital\\and 2256 720 R0
SYMATTR InstName A1
SYMATTR SpiceLine2 Vhigh=5 Vlow=0 Ref=1.0
SYMBOL Digital\\and 2256 592 R0
SYMATTR InstName A3
SYMBOL Digital\\inv 2096 576 R0
SYMATTR InstName A2
SYMBOL diode 3200 832 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL diode 3184 624 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL diode 2928 624 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL diode 2928 848 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
TEXT -304 -272 Left 2 !.tran 0 0.3 0 1.2
TEXT -288 -240 Left 2 ;Detectie spindelsnelheid
TEXT -600 584 Left 2 ;50hz 10% > tcyc=0.02 ton = 0.002\n20kHz 10% > 0.00005   0.000005
TEXT -312 520 Left 2 ;PWM input
TEXT 1056 272 Left 2 ;C1
TEXT 1152 352 Left 2 ;C2
TEXT 1240 368 Left 2 ;R1
TEXT 1512 -32 Left 2 ;F/V conversion
TEXT 1456 856 Left 2 ;If voltage too low, apply power to motor.
TEXT 2520 536 Left 2 ;H-bridge
TEXT 2040 944 Left 2 ;dir pin
TEXT 1552 648 Left 2 ;TI TLV3502AIDR
TEXT 136 224 Left 2 ;TI TLV3502AIDR
TEXT 2232 592 Left 2 ;TI SN74HC08DR
TEXT 1880 576 Left 2 ;TI SN74LVC1G04DCKR
